<h1><%= @question.title %></h1>
<p> <%= @question.body %><p>
<% if @question.reward.present? %>
  Reward:
  <%= "#{@question.reward.title}" %>
  <%= image_tag(@question.reward.img_url, size: "20x20")%>
<% end %>
<% if @question.files.attached? %>
  <% @question.files.each do |file| %>
    <p>
    <%= link_to file.filename.to_s, url_for(file), target: :_blank %>
    </p>
  <% end %>
<% end %>

<% if @question.links.present? %>
  <div class="question-links">
    <p>Links:
      <ul>
        <% @question.links.each do |l| %>
          <div data-link-id="<%= l.id %>">
            <% if l.is_a_gist? %>
              <%= render 'shared/gist', url: l.url %>
            <% else %>
              <li><%= link_to l.name, l.url, target: :_blank %></li>
            <% end %>
            <% if current_user&.owner_of?(@question) %>
              <%= link_to 'Delete link', link_path(l), method: :delete, remote: true %>
            <% end %>
          </div>
        <% end %>
      </ul>
    </p>
  </div>
<% end %>

<hr>
<p>Best answer</p>

<div class="best-answer" >
  <% if @question.best_answer.present? %>
    <div class='answers'>  
      <%=  render @question.best_answer %>
    </div>
  <% else %>
    Not selected by the author
  <% end %>
</div>
<hr>
<div class='answers'>
  <p>Answers</p>
  <%= render @question.answers.where(best: false) %>
</div>

<div class='answer-errors'>
</div>

<%= render partial: 'answers/new' %>

<% if current_user&.owner_of?(@question) %>
  <%= link_to 'Delete question', question_path(@question), method: :delete, data: { confirm: 'Sure?' } %>
<% end %>